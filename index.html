<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Support Archbishops Bagrat & Mikael</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: auto;
      background-color: #f9f9f9;
    }
    h1 {
      color: #8B0000;
      text-align: center;
    }
    form {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, button, select {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    button {
      background-color: #8B0000;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    #letterPreview {
      background: #fff;
      padding: 20px;
      border-left: 4px solid #8B0000;
      white-space: pre-wrap;
    }
    .hidden {
      display: none;
    }
    #repsList {
      background: #fff;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      max-height: 200px;
      overflow-y: auto;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

  <h1>Support Archbishops Bagrat Galstanyan & Mikael Adjapahyan</h1>
  <p style="text-align:center; font-weight: bold;">
    Demand their immediate release from unlawful detention in Armenia.
  </p>

  <form id="letterForm">
    <input type="text" id="fullName" placeholder="Full Name" required />
    <input type="text" id="email" placeholder="Email Address" required />
    <input type="text" id="phone" placeholder="Phone Number (optional)" />
    <input type="text" id="address" placeholder="Street Address" required />
    <input type="text" id="city" placeholder="City" required />
    <input type="text" id="state" placeholder="State" required />
    <input type="text" id="zip" placeholder="ZIP Code" required />

    <select id="language">
      <option value="en">English</option>
      <option value="hy">Armenian</option>
      <option value="ru">Russian</option>
    </select>

    <button type="button" id="lookupReps">Lookup Representatives</button>
    <div id="repsList" class="hidden"></div>

    <button type="submit">Generate Letter</button>
  </form>

  <div id="letterContainer" class="hidden">
    <h2>Your Letter:</h2>
    <div id="letterPreview"></div>
    <button onclick="copyLetter()">ðŸ“‹ Copy Letter</button>
    <button id="sendEmailButton">ðŸ“§ Send via Email</button>
  </div>

  <script>
    const lookupButton = document.getElementById('lookupReps');
    const repsList = document.getElementById('repsList');
    let representatives = [];

    lookupButton.addEventListener('click', () => {
      const zip = document.getElementById('zip').value.trim();
      if (!zip.match(/^\d{5}$/)) {
        alert('Please enter a valid 5-digit ZIP code');
        return;
      }

      repsList.innerHTML = 'Looking up representatives...';
      repsList.classList.remove('hidden');

      // Use JSONP workaround due to CORS limits
      const script = document.createElement('script');
      script.src = `https://whoismyrepresentative.com/getall_mems.php?zip=${zip}&output=json&callback=displayReps`;
      document.body.appendChild(script);
    });

    function displayReps(data) {
      representatives = data.results || [];
      if (representatives.length === 0) {
        repsList.textContent = 'No representatives found for this ZIP.';
        return;
      }

      repsList.innerHTML = '<b>Your Federal Representatives:</b><br>';
      representatives.forEach(rep => {
        const name = rep.name;
        const email = `${name.toLowerCase().replace(/ /g, '.')}@house.gov`;
        repsList.innerHTML += `
          <div style="margin-bottom:8px;">
            ${rep.office}: ${rep.name}
            <button onclick="window.open('mailto:${email}')">Send Email</button>
          </div>`;
      });
    }

    document.getElementById('letterForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const fullName = document.getElementById('fullName').value;
      const email = document.getElementById('email').value;
      const phone = document.getElementById('phone').value;
      const address = document.getElementById('address').value;
      const city = document.getElementById('city').value;
      const state = document.getElementById('state').value;
      const zip = document.getElementById('zip').value;
      const lang = document.getElementById('language').value;

      let letter = '';

      if (lang === 'hy') {
        letter = `
ÕŽÕ¥Ö€Õ¶Õ¡Õ£Õ«Ö€â€¤ ÕŠÕ¡Õ°Õ¡Õ¶Õ»Õ¸Ö‚Õ´ Õ¥Õ´ Õ¢Õ¡Ö Õ©Õ¸Õ²Õ¶Õ¥Õ¬ Õ¡Ö€Ö„Õ¥ÕºÕ«Õ½Õ¯Õ¸ÕºÕ¸Õ½ Ô²Õ¡Õ£Ö€Õ¡Õ¿Õ«Õ¶ Ö‡ Õ„Õ«Ö„Õ¡ÕµÕ¥Õ¬Õ«Õ¶

Õ€Õ¡Ö€Õ£Õ¥Õ¬Õ« ÕÕ¥Õ¶Õ¡Õ¿Õ¸Ö€/Ô¿Õ¸Õ¶Õ£Ö€Õ¥Õ½Õ¡Õ¯Õ¡Õ¶,

ÔµÕ½Õ ${fullName}-Õ¨, Õ¡ÕºÖ€Õ¸Ö‚Õ´ Õ¥Õ´ ${city}, ${state}-Õ¸Ö‚Õ´Ö‰ Õ€Õ¡ÕµÕ¿Õ¶Õ¸Ö‚Õ´ Õ¥Õ´ Õ«Õ´ Õ´Õ¿Õ¡Õ°Õ¸Õ£Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶Õ¨ Õ€Õ¡ÕµÕ¡Õ½Õ¿Õ¡Õ¶Õ¸Ö‚Õ´ Õ¡Ö€Ö„Õ¥ÕºÕ«Õ½Õ¯Õ¸ÕºÕ¸Õ½ Ô²Õ¡Õ£Ö€Õ¡Õ¿ Ô³Õ¡Õ¬Õ½Õ¿Õ¡Õ¶ÕµÕ¡Õ¶Õ« Ö‡ Õ„Õ«Ö„Õ¡ÕµÕ¥Õ¬ Ô±Õ»Õ¡ÕºÕ¡Õ°ÕµÕ¡Õ¶Õ« Õ¡ÕºÖ…Ö€Õ«Õ¶Õ« Õ¯Õ¡Õ¬Õ¡Õ¶Õ¡Õ¾Õ¸Ö€Õ´Õ¡Õ¶ Õ¯Õ¡ÕºÕ¡Õ¯ÖÕ¸Ö‚Õ©ÕµÕ¡Õ´Õ¢Ö‰

Õ†Ö€Õ¡Õ¶Ö„ Õ°Õ¸Õ£Ö‡Õ¸Ö€ Õ¡Õ¼Õ¡Õ»Õ¶Õ¸Ö€Õ¤Õ¶Õ¥Ö€ Õ¥Õ¶, Õ¸Õ¾Ö„Õ¥Ö€ Õ¯Õ¡Õ¶Õ£Õ¶Õ¡Õ® Õ¥Õ¶ ÕªÕ¸Õ²Õ¸Õ¾Ö€Õ¤Õ« Õ¯Õ¸Õ²Ö„Õ«Õ¶Ö‰ Ô¿Õ¸Õ¹ Õ¥Õ´ Õ¡Õ¶Õ¸Ö‚Õ´ ÕÕ¥Õ¦Õ Õ¤Õ¡Õ¿Õ¡ÕºÕ¡Ö€Õ¿Õ¥Õ¬ Õ¡ÕµÕ½ Õ£Õ¸Ö€Õ®Õ¸Õ²Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶Õ¶Õ¥Ö€Õ¨ Ö‡ ÕºÕ¡Õ°Õ¡Õ¶Õ»Õ¥Õ¬ Õ¶Ö€Õ¡Õ¶Ö Õ¡Õ¶Õ°Õ¡ÕºÕ¡Õ² Õ¡Õ¦Õ¡Õ¿ Õ¡Ö€Õ±Õ¡Õ¯Õ¸Ö‚Õ´Õ¨Ö‰

Õ€Õ¡Ö€Õ£Õ¡Õ¶Ö„Õ¸Õ¾Õ
${fullName}
${address}
${city}, ${state} ${zip}
${email} ${phone}
        `.trim();
      } else if (lang === 'ru') {
        letter = `
Ð¢ÐµÐ¼Ð°: Ð¢Ñ€ÐµÐ±ÑƒÐµÐ¼ Ð½ÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¾ÑÐ²Ð¾Ð±Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ Ð°Ñ€Ñ…Ð¸ÐµÐ¿Ð¸ÑÐºÐ¾Ð¿Ð¾Ð² Ð‘Ð°Ð³Ñ€Ð°Ñ‚Ð° Ð¸ ÐœÐ¸ÐºÐ°ÑÐ»Ð°

Ð£Ð²Ð°Ð¶Ð°ÐµÐ¼Ñ‹Ð¹ Ð¡ÐµÐ½Ð°Ñ‚Ð¾Ñ€ / ÐšÐ¾Ð½Ð³Ñ€ÐµÑÑÐ¼ÐµÐ½,

ÐœÐµÐ½Ñ Ð·Ð¾Ð²ÑƒÑ‚ ${fullName}, Ñ Ð¶Ð¸Ð²Ñƒ Ð² ${city}, ${state}. Ð¯ Ð²Ñ‹Ñ€Ð°Ð¶Ð°ÑŽ Ð³Ð»ÑƒÐ±Ð¾ÐºÑƒÑŽ Ð¾Ð±ÐµÑÐ¿Ð¾ÐºÐ¾ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾ Ð¿Ð¾Ð²Ð¾Ð´Ñƒ Ð½ÐµÐ·Ð°ÐºÐ¾Ð½Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ñ Ð°Ñ€Ñ…Ð¸ÐµÐ¿Ð¸ÑÐºÐ¾Ð¿Ð¾Ð² Ð‘Ð°Ð³Ñ€Ð°Ñ‚Ð° Ð“Ð°Ð»ÑÑ‚Ð°Ð½ÑÐ½Ð° Ð¸ ÐœÐ¸ÐºÐ°ÑÐ»Ð° ÐÐ´Ð¶Ð°Ð¿Ð°Ñ…ÑÐ½Ð° Ð² ÐÑ€Ð¼ÐµÐ½Ð¸Ð¸.

ÐžÐ½Ð¸ â€” Ð´ÑƒÑ…Ð¾Ð²Ð½Ñ‹Ðµ Ð»Ð¸Ð´ÐµÑ€Ñ‹, Ð²Ñ‹ÑÑ‚ÑƒÐ¿Ð°ÑŽÑ‰Ð¸Ðµ Ð·Ð° ÑÐ¿Ñ€Ð°Ð²ÐµÐ´Ð»Ð¸Ð²Ð¾ÑÑ‚ÑŒ. ÐŸÑ€Ð¸Ð·Ñ‹Ð²Ð°ÑŽ Ð’Ð°Ñ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð¾ Ð¾ÑÑƒÐ´Ð¸Ñ‚ÑŒ ÑÑ‚Ð¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð¸ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ñ… Ð½ÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¾ÑÐ²Ð¾Ð±Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ.

Ð¡ ÑƒÐ²Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼,
${fullName}
${address}
${city}, ${state} ${zip}
${email} ${phone}
        `.trim();
      } else {
        letter = `
Subject: Demand for Immediate Release of Archbishops Bagrat and Mikael

Dear Senator/Congressman,

My name is ${fullName}, a resident of ${city}, ${state}, and I urge you to speak out against the unlawful detention of Archbishops Bagrat Galstanyan and Mikael Adjapahyan in Armenia.

As someone who values democracy and religious freedom, I ask you to publicly demand their release and advocate for the rule of law in Armenia.

Sincerely,
${fullName}
${address}
${city}, ${state} ${zip}
${email} ${phone}
        `.trim();
      }

      document.getElementById('letterPreview').textContent = letter;
      document.getElementById('letterContainer').classList.remove('hidden');
      document.getElementById('sendEmailButton').onclick = () => {
        window.location.href = `mailto:?subject=Support for Detained Armenian Archbishops&body=${encodeURIComponent(letter)}`;
      };
    });

    function copyLetter() {
      const text = document.getElementById('letterPreview').textContent;
      navigator.clipboard.writeText(text).then(() => {
        alert('Letter copied to clipboard!');
      });
    }
  </script>

</body>
</html>
